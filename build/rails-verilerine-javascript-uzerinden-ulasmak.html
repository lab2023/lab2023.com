<!DOCTYPE html>
<html class='no-js' lang='en'>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<title>lab2023 | web & mobile development, graphic design company - Rails Verilerine Javascript Üzerinden Ulaşmak
</title>
<meta content='Designers and developers for hire' name='description'>
<meta content='design, ruby, ruby on rails, ios, android, sencha, istanbul, ankara, denizli, turkey' name='keywords'>
<link href="assets/stylesheets/application.css" rel="stylesheet" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" /><link href="assets/stylesheets/swiper-bundle.min.css" rel="stylesheet" />
<link href="assets/images/favicon.png" rel="icon" type="image/png" />
<meta content='Rails Verilerine Javascript Üzerinden Ulaşmak' name='description'>
<meta content='rails, data, javascript, gon, ruby, fundamentals, tr' name='keywords'>
<meta content='Fadime ÖZHAN' name='author'>


</head>
<body id='blog'>
<header class='header'>
<div class='container'>
<div class='row'>
<div class='col-lg-2 col-lg-offset-1'>
<a href="/blog"><img class="logo pull-right" width="252" height="253" src="assets/images/logo.png" alt="Logo" />
</a></div>
<div class='col-lg-8'>
<h1>
<a href="/blog">lab2023's blog posts</a>
<a href="http://lab2023.com/feed.xml" target="_blank"><i class='fa fa-rss'></i>
</a></h1>
<div class='row'>
<div class='col-lg-3'>
<p>
<a href="/"><i class='fa fa-arrow-circle-left'></i>
lab2023.com
</a></p>
</div>
<div class='col-lg-9' id='language_linked'>
<p>
<a href="/tag/tr.html">Türkçe
</a>·
<a href="/tag/en.html">English
</a>·
<a href="/tag/es.html">Español
</a>·
<a href="/tag/ru.html">Русский
</a></p>
</div>
</div>
</div>
</div>
</div>
</header>

<!-- share-buttons js code -->
<div id='fb-root'>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/tr_TR/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  (function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs'));
</script>
</div>
<div class='container'>
<div class='row'>
<div class='col-lg-2 col-lg-offset-1 article-meta'>
<h4><a href="http://twitter.com/fadimezhan" target="_blank">Fadime ÖZHAN</a></h4>
<h5>February  3, 2017</h5>
<span class='tag'><a href="/tag/rails.html">rails</a></span>
<span class='tag'><a href="/tag/data.html"> data</a></span>
<span class='tag'><a href="/tag/javascript.html"> javascript</a></span>
<span class='tag'><a href="/tag/gon.html"> gon</a></span>
<span class='tag'><a href="/tag/ruby.html"> ruby</a></span>
<span class='tag'><a href="/tag/fundamentals.html"> fundamentals</a></span>
<span class='tag'><a href="/tag/tr.html"> tr</a></span>
<!-- Share buttons -->
<ul class='share_button'>
<li>
<div class='fb-share-button' data-href='http://lab2023.com/rails-verilerine-javascript-uzerinden-ulasmak.html' data-type='button_count'></div>
</li>
<li>
<a class='twitter-share-button' data-text='http://lab2023.com/rails-verilerine-javascript-uzerinden-ulasmak.html' data-via='lab2023' href='https://twitter.com/share'></a>
</li>
<li>
<script src='//platform.linkedin.com/in.js' type='text/javascript'>
<![CDATA[
    lang: en_US
]]>
</script>
<script data-url='http://lab2023.com/rails-verilerine-javascript-uzerinden-ulasmak.html' type='IN/Share'></script>
</li>
</ul>
</div>
<div class='col-lg-8'>
<article class='post'>
<h1>Rails Verilerine Javascript Üzerinden Ulaşmak</h1>
<p>Merhaba,</p>

<p>Bu yazımda sizlere Gon gem&#39;inin kullanımı ve Rails ile Javascript kullanırken GON sayesinde Rails tarafından oluşturulan 
değişkenlerin Javascript tarafına nasıl aktarılacağını ve erişilebileceğini anlatmaya çalışacağım.</p>

<p>Javascript dosyasından HTML elementlerine herhangi bir veri içeriğini eklemek ve başka yerlerden erişmek için <code>data</code> özelliği kullanılır.
Data ile HTML elemanlarına veriler ekler ve bu verilere erişme imkanı bulabiliriz. </p>

<p>Basit bir örnek kullanımı aşağıdaki gibidir;</p>

<p>index.html.haml dosyasında:</p>
<div class="highlight"><pre class="highlight ruby"><code>  <span class="n">content_tag</span> <span class="s2">"div"</span><span class="p">,</span> <span class="nb">id</span><span class="ss">:"products"</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">url: </span><span class="n">products_url</span> <span class="p">}</span> 
</code></pre></div>
<p>application.js.coffee dosyasında;</p>
<div class="highlight"><pre class="highlight plaintext"><code>jQuery-&gt;
  console.log $(‘#products’).data(‘url’)
</code></pre></div>
<p>Bu şekilde kullandığımızda konsola data-url değerini basacaktır.</p>

<h1 id="gon-gem">Gon Gem</h1>

<p>Gon gem&#39;i, Rails değişkenlerinize javascript dosyalarınızdan erişmenizi sağlayan bir gem&#39;dir.</p>

<p>Javascript dosyanızda kullanmanız gereken bir veri olduğunda bunu view dosyalarından parse etmek yerine bu gem sayesinde
Rails verilerini kullanabileceğiniz işlerinizi kolaylaştıran bir araçtır.</p>

<h3 id="kullan-m">Kullanımı:</h3>

<p>Gemfile dosyasına;</p>
<div class="highlight"><pre class="highlight shell"><code> gem ‘gon’
</code></pre></div>
<p>app/views/layouts/application.html.haml dosyasına head tagleri arasına;</p>
<div class="highlight"><pre class="highlight shell"><code> <span class="o">=</span> Gon::Base.render_data
</code></pre></div>
<p>Controller.rb dosyasına;</p>
<div class="highlight"><pre class="highlight shell"><code>  gon.your_variable  <span class="o">=</span> variable_value
</code></pre></div>
<p>Javascript dosyasından;</p>
<div class="highlight"><pre class="highlight shell"><code>  gon.your_variable 
</code></pre></div>
<p>ile veriye erişebilirsiniz. İşte bu kadar.</p>

<p>Faydalı bir kullanımı da var. <code>gon.watch</code>ile sayfayı yenilemeden tutulan veriyi güncelleyebiliyorsunuz.</p>

<p><code>gon.watch</code> kullanımı ise şu şekildedir;</p>

<p>normalde gon.your_variable şeklinde oluşturduğunuz değişkeni; <code>gon.watch.your_variable</code> şeklinde oluşturuyorsunuz.</p>

<p>Daha sonra javascript dosyalarınızda aldığı bazı parametreler ile kullanabilirsiniz. Örneğin: 
<code>gon.watch(name_of_variable, options, callback)</code> parametreleri ile kullanılabilmektedir.</p>
<div class="highlight"><pre class="highlight shell"><code>gon.watch<span class="o">(</span><span class="s1">'your_variable'</span>, interval: 1000, function_name<span class="o">)</span>
</code></pre></div>
<ul>
<li><strong>name_of_variable:</strong> controllerda tanımladığımız değişken</li>
<li><strong>options:</strong>

<ul>
<li><strong>interval:</strong> gon.watch için döngü oluşturmayı sağlar, döngü başarılı olduğunda callback çağrılır.</li>
<li><strong>method:</strong> ajax istekleri için method</li>
<li><strong>url:</strong> ajax istekleri için url </li>
</ul></li>
<li><strong>callback:</strong> ajax isteği başarılı olduğunda çağırılacak olan fonksiyondur.</li>
</ul>

<h1 id="rabl-gem">Rabl Gem</h1>

<p>Rabl, json cevapları için bir gem&#39;dir. Açılımı Ruby API Builder Language şeklindedir. </p>

<p>JSON ise verinin hızlı ve küçük boyutlarda erişimini sağlar. Bilindiği üzere JSON, xml’in javascript ile uyumlu ve daha hızlı 
kullanımını sağlayan bir alternatifidir.</p>

<h3 id="nas-l-kullan-l-r">Nasıl kullanılır?</h3>

<p>Gemfile dosyasına;</p>
<div class="highlight"><pre class="highlight shell"><code> gem ‘rabl’
</code></pre></div>
<p>eklenir.</p>

<p>JSON formatlı cevap dönmesini istediğimiz html sayfasının json.rabl uzantılı halini oluşturmalıyız. Örneğin index.html.haml sayfası için index.json.rabl dosyası oluşturmalıyız.
Örnek kullanımı aşağıdaki şekildedir;</p>

<p>index.json.rabl dosyasına:</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="n">object</span> <span class="vi">@products</span>
<span class="n">attributes</span> <span class="ss">:id</span><span class="p">,</span><span class="ss">:name</span><span class="p">,</span><span class="ss">:published_at</span>

<span class="k">if</span> <span class="n">current_user</span><span class="p">.</span><span class="nf">admin?</span>
   <span class="n">node</span><span class="p">(</span><span class="ss">:edit_url</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">product</span><span class="o">|</span> <span class="n">edit_product_url</span><span class="p">(</span><span class="n">product</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p>Rabl dosyalarını html içine gömerek kaynak kodda görüntüleyebiliriz. Bunu için;</p>
<div class="highlight"><pre class="highlight haml"><code><span class="nf">#products</span><span class="p">{</span><span class="ss">data: </span><span class="p">{</span><span class="ss">articles: </span><span class="err">“</span> <span class="o">=</span> <span class="n">render</span> <span class="p">(</span><span class="ss">template: </span><span class="err">‘</span><span class="n">articles</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">json</span><span class="p">.</span><span class="nf">rabl</span><span class="err">’</span><span class="p">)</span><span class="err">”</span><span class="p">}}</span> 
</code></pre></div>
<p>kodunu ekleyelim.</p>

<h2 id="gon-geminin-rabl-le-kullan-m">Gon geminin Rabl İle Kullanımı</h2>

<p>Javascripte kullanmak istediğiniz veriyi rabl dosyasından çekebiliriz. Bunun için;</p>

<p>Index.json.rabl dosyası oluşturalım;</p>
<div class="highlight"><pre class="highlight ruby"><code> <span class="n">collection</span> <span class="no">Product</span><span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
 <span class="n">attributes</span> <span class="ss">:id</span><span class="p">,</span><span class="ss">:name</span><span class="p">,</span><span class="ss">:price</span>
</code></pre></div>
<p>Products_controller.rb dosyasında;</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">index</span>
  <span class="n">gon</span><span class="p">.</span><span class="nf">rabl</span> <span class="err">“</span><span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">products</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">json</span><span class="p">.</span><span class="nf">rabl</span><span class="err">”</span> <span class="p">,</span> <span class="ss">as: </span><span class="err">“</span><span class="n">products</span><span class="err">”</span>
<span class="k">end</span>   
</code></pre></div>
<p>Application.js.coffee dosyasına;</p>
<div class="highlight"><pre class="highlight javascript"><code><span class="nx">gon</span><span class="p">.</span><span class="nx">products</span> <span class="k">if</span> <span class="nx">gon</span>     
</code></pre></div>
<p>şeklinde kullanabiliriz.</p>

<p>Umarım bu yazım sizlere açıklayıcı ve ilgili araçların kullanımı ile ilgili fikir verici olmuştur.</p>

<p>İyi çalışmalar.</p>

<div id='disqus_thread'></div>
<script>
  var disqus_shortname = 'lab2023';
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>
Please enable JavaScript to view the
<a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
</noscript>
<a class='dsq-brlink' href='http://disqus.com'>
comments powered by
<span class='logo-disqus'>Disqus</span>
</a>
</article>
</div>
</div>
</div>
<footer class='footer'>
<h4>© 2009 ~ 2020 LAB2023, CORP.</h4>
<p>The all designs, materials and contents trademarks of lab2023, corp.</p>
</footer>

</body>
<!-- Javascripts -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script><script src="assets/javascripts/vendor/swiper-bundle.min.js"></script><script src="assets/javascripts/application.js"></script>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12243799-3']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</html>
